@{
    ViewBag.Title = "Create Post";
}

<div class="container mt-5">
    <h2 class="mb-4 text-center">📝 Create a New Post</h2>

    <!-- Show validation message -->
    @if (!ViewData.ModelState.IsValid)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            Please fill up the information boxes first.
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }

    <form method="post" enctype="multipart/form-data" asp-action="CreatePost" class="card p-4 shadow-sm" style="background-color: #FFFFF0;">
        <!-- Post Type Selector -->
        <div class="mb-3">
            <label for="postType" class="form-label">Who are you?</label>
            <select id="postType" name="PostType" class="form-select" onchange="toggleFields()">
                <option value="">Select</option>
                <option value="Owner">Owner</option>
                <option value="Renter">Renter</option>
            </select>
        </div>

        <!-- Owner Fields -->
        <div id="ownerFields" style="display:none;">
            <h5 class="mt-4">🏠 Owner Details</h5>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">House Type</label>
                    <input type="text" name="HouseType" class="form-control" />
                </div>
                <div class="col-md-3 mb-3">
                    <label class="form-label">Bedrooms</label>
                    <input type="number" name="Bedrooms" class="form-control" />
                </div>
                <div class="col-md-3 mb-3">
                    <label class="form-label">Bathrooms</label>
                    <input type="number" name="Bathrooms" class="form-control" />
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Rent Amount</label>
                    <input type="number" name="RentAmount" class="form-control" />
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Amenities</label>
                    <input type="text" name="Amenities" class="form-control" placeholder="e.g. WiFi, Parking" />
                </div>
            </div>
        </div>

        <!-- Renter Fields -->
        <div id="renterFields" style="display:none;">
            <h5 class="mt-4">🔍 Renter Preferences</h5>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Budget</label>
                    <input type="number" name="Budget" class="form-control" />
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Preferred House Type</label>
                    <input type="text" name="HouseType" class="form-control" />
                </div>
                <div class="col-12 mb-3">
                    <label class="form-label">Required Amenities</label>
                    <input type="text" name="Amenities" class="form-control" />
                </div>
            </div>
        </div>

        <!-- Common Fields -->
        <h5 class="mt-4">📍 Location & Description</h5>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label">Area</label>
                <input type="text" name="Area" class="form-control" />
            </div>
            <div class="col-md-6 mb-3">
                <label class="form-label">Upload Photos/Videos</label>
                <input type="file" name="MediaFiles" multiple class="form-control" />
            </div>
            <div class="col-12 mb-3">
                <label class="form-label">Description</label>
                <textarea name="Description" rows="4" class="form-control" placeholder="Add any extra details..."></textarea>
            </div>
        </div>

        <div class="text-center mt-4">
            <button type="submit"
                    class="px-5"
                    style="background-color:#5C0002; border:2px solid #5C0002; color:#fff; border-radius:6px; padding:8px 24px;">
                🚀 Submit Post
            </button>
        </div>
    </form>
</div>

<!-- JavaScript for Dynamic Field Toggle -->
<script>
    function toggleFields() {
        const type = document.getElementById("postType").value;
        document.getElementById("ownerFields").style.display = type === "Owner" ? "block" : "none";
        document.getElementById("renterFields").style.display = type === "Renter" ? "block" : "none";
    }
</script>
